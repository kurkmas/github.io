const gallerySwiper=new Swiper(".gallery-swiper-container",{direction:"horizontal",slidesPerGroup:1,slidesPerColumn:1,slidesPerView:1,spaceBetween:10,breakpoints:{455:{slidesPerGroup:2,slidesPerColumn:1,slidesPerView:2,spaceBetween:20},760:{slidesPerGroup:2,slidesPerColumn:2,slidesPerView:2,spaceBetween:34},1321:{slidesPerGroup:3,slidesPerColumn:2,slidesPerView:3,spaceBetween:50}},navigation:{nextEl:".gallery-button-next",prevEl:".gallery-button-prev"},pagination:{el:".gallery-pagination",type:"fraction"}});document.addEventListener("DOMContentLoaded",(function(){window.onresize=function(){gallerySwiper.update()}}));const editionSwiper=new Swiper(".edition-swiper-container",{direction:"horizontal",slidesPerGroup:1,slidesPerView:1,slidesPerColumn:1,spaceBetween:10,navigation:{nextEl:".edition-button-next",prevEl:".edition-button-prev"},pagination:{el:".edition-pagination",type:"fraction"},breakpoints:{455:{slidesPerGroup:2,slidesPerView:2,slidesPerColumn:1,spaceBetween:34},1200:{slidesPerGroup:1,slidesPerColumn:1,slidesPerView:2,spaceBetween:50},1500:{slidesPerGroup:1,slidesPerColumn:1,slidesPerView:3,spaceBetween:50}}}),projectsSwiper=new Swiper(".projects-swiper-container",{direction:"horizontal",slidesPerView:1,slidesPerGroup:1,slidesPerColumn:1,spaceBetween:10,navigation:{nextEl:".pro-button-next",prevEl:".pro-button-prev"},breakpoints:{580:{slidesPerGroup:2,slidesPerView:2,slidesPerColumn:1,spaceBetween:34},1197:{slidesPerGroup:3,slidesPerColumn:1,slidesPerView:3,spaceBetween:50}}}),eventSwiper=new Swiper(".event-swiper-container",{direction:"horizontal",slidesPerView:1,spaceBetween:10,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}),selector=document.querySelector('input[type="tel"]'),im=new Inputmask("+7 (999) 999-99-99");im.mask(selector),new JustValidate("form",{tel:{required:!0,function:(e,t)=>{const n=selector.inputmask.unmaskedvalue();return Number(n)&&10==n.length}}});const element=document.querySelector("#select"),choises=new Choices(element,{itemSelectText:"",searchEnabled:!1}),burgerBtn=document.querySelector(".burger-menu");function showHiddenForm(){document.querySelector(".tablet-loupe__search").classList.add("search-active")}burgerBtn.addEventListener("click",(function(){document.querySelector(".burger-menu__nav").classList.toggle("menu__nav-active"),document.querySelector(".burger-menu__icon").classList.toggle("icon-active"),document.querySelector(".tablet-loupe__search").classList.toggle("tablet-loupe__search--hidden")})),document.querySelector(".tablet-loupe").addEventListener("click",(function(e){e.currentTarget.classList.add("search-active"),document.querySelector(".mobile-bg").classList.add("mobile-bg--active"),showHiddenForm()})),document.querySelector(".close").addEventListener("click",(function(){document.querySelector(".tablet-loupe__search").classList.remove("search-active"),document.querySelector(".tablet-loupe").classList.remove("search-active"),document.querySelector(".mobile-bg").classList.remove("mobile-bg--active")}));const styleList=document.querySelector(".header__bottom__list"),styleLIstItems=document.querySelectorAll(".header__bottom__list__item__link"),headerHiddenList=document.querySelectorAll(".hidden__list-wrapper"),svgArrow=document.querySelectorAll(".header__bottom__list__item__svg"),article=document.querySelector(".article__box__wrap"),modalBtn=document.querySelector(".get-in__inner"),modalClose=document.querySelectorAll(".modalCloseBtn"),modalWindow=document.querySelector(".modal__wrapper"),galleryModalContent=document.querySelector(".gallery-modal"),tabletModalBtn=document.querySelector(".get-in__box");function closeHiddenList(){headerHiddenList.forEach((function(e){e.classList.remove("hidden__list--active")})),svgArrow.forEach((function(e){e.classList.remove("list__item__svg--active")}))}modalBtn.addEventListener("click",(function(e){(e.target==modalBtn||document.querySelector(".get-in")||document.querySelector(".get-in svg"))&&(document.querySelector(".modal").style.display="block"),modalWindow.classList.add("modal--active"),document.body.style.overflowY="hidden"})),tabletModalBtn.addEventListener("click",(function(){document.querySelector(".modal").style.display="block",modalWindow.classList.add("modal--active"),document.body.style.overflowY="hidden"})),styleList.addEventListener("click",(function(e){const t=e.target;closeHiddenList(),styleLIstItems.forEach((function(e,n){t==e&&(headerHiddenList[n].classList.add("hidden__list--active"),svgArrow[n].classList.add("list__item__svg--active"))}))})),article.addEventListener("click",(function(e){e.target!==styleList&&closeHiddenList()})),document.querySelectorAll(".header__bottom__list__item").forEach((function(e){e.addEventListener("keydown",(function(t){"Enter"==t.code&&(e.querySelector(".hidden__list-wrapper").classList.toggle("hidden__list--active"),e.querySelector(".header__bottom__list__item__svg").classList.toggle("list__item__svg--active"))}))}));const galleryContent=document.querySelector(".gallery-swiper-container");function showHiddenCards(){document.querySelectorAll(".event-list__card").forEach((function(e){e.classList.remove("hidden-card"),e.classList.remove("hidden-tablet-card")}))}function hideButton(){const e=document.querySelector(".event__btn");e.addEventListener("click",(function(){e.style="display: none",showHiddenCards()}))}function init(){const e=new ymaps.Map("map",{center:[55.75846306898368,37.601079499999905],zoom:12}),t=new ymaps.Placemark([55.75846306898368,37.601079499999905],{},{iconLayout:"default#image",iconImageHref:"img/svg/mapmark.svg",iconImageSize:[20,20],iconImageOffset:[-3,-42]});e.geoObjects.add(t)}galleryContent.addEventListener("click",(function(e){const t=e.target,n=t.parentElement.parentElement.querySelector("picture").innerHTML;document.querySelector(".gallery-modal__img picture").innerHTML=n,(t===document.querySelector(".gallery-img__hover")||document.querySelector(".gallery-img__hover-loupe"))&&(document.querySelector(".modal__wrapper").classList.add("modal--active"),galleryModalContent.style.display="flex",document.body.style.overflowY="hidden")})),modalClose.forEach((function(e){e.addEventListener("click",(function(t){e.parentElement.parentElement.parentElement.classList.remove("modal--active"),modalWindow.classList.remove("modal--active"),document.querySelector(".modal").style.display="none",galleryModalContent.style.display="none",document.body.style.overflowY="auto"}))})),document.querySelectorAll(".hidden__list-wrapper").forEach((function(e){new SimpleBar(e)})),document.querySelectorAll(".catalog-main__list__item__title").forEach((function(e){e.addEventListener("click",(function(t){e.nextElementSibling.classList.toggle("inner-list__active"),t.currentTarget.lastElementChild.classList.toggle("arrow-down--active"),t.preventDefault()}))})),document.querySelectorAll(".inner-list__item").forEach((function(e){e.addEventListener("click",(function(e){const t=e.currentTarget.dataset.artist;document.querySelectorAll(".artist-container").forEach((function(e){e.classList.remove("artist-container--active")})),document.querySelector(`[data-target="${t}"]`).classList.add("artist-container--active")}))})),document.querySelectorAll(".inner-list__artists").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault()}))})),document.querySelectorAll(".catalog-lang-list__item").forEach((function(e){e.addEventListener("click",(function(e){const t=e.currentTarget.dataset.country;document.querySelectorAll(".catalog-main").forEach((function(e){e.classList.remove("catalog-main--active")})),document.querySelector(`[data-container="${t}"]`).classList.add("catalog-main--active")}))})),document.querySelectorAll(".catalog-lang-list__item").forEach((function(e){e.addEventListener("keydown",(function(e){const t=e.currentTarget.dataset.country;"Enter"==e.code&&(document.querySelectorAll(".catalog-main").forEach((function(e){e.classList.remove("catalog-main--active")})),document.querySelector(`[data-container="${t}"]`).classList.add("catalog-main--active"))}))})),hideButton(),document.querySelector(".categories__mobile-wrapper").addEventListener("click",(function(){document.querySelector(".mobile-edition-form").classList.toggle("mobile-edition-form--active"),document.querySelector(".categories__arrow").classList.toggle("categories__arrow--active")})),ymaps.ready(init);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZ2FsbGVyeVN3aXBlciIsIlN3aXBlciIsImRpcmVjdGlvbiIsInNsaWRlc1Blckdyb3VwIiwic2xpZGVzUGVyQ29sdW1uIiwic2xpZGVzUGVyVmlldyIsInNwYWNlQmV0d2VlbiIsImJyZWFrcG9pbnRzIiwiNDU1IiwiNzYwIiwiMTMyMSIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJwYWdpbmF0aW9uIiwiZWwiLCJ0eXBlIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwid2luZG93Iiwib25yZXNpemUiLCJ1cGRhdGUiLCJlZGl0aW9uU3dpcGVyIiwiMTIwMCIsIjE1MDAiLCJwcm9qZWN0c1N3aXBlciIsIjU4MCIsIjExOTciLCJldmVudFN3aXBlciIsImNsaWNrYWJsZSIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsImltIiwiSW5wdXRtYXNrIiwibWFzayIsIkp1c3RWYWxpZGF0ZSIsInRlbCIsInJlcXVpcmVkIiwiZnVuY3Rpb24iLCJuYW1lIiwidmFsdWUiLCJwaG9uZSIsImlucHV0bWFzayIsInVubWFza2VkdmFsdWUiLCJOdW1iZXIiLCJsZW5ndGgiLCJlbGVtZW50IiwiY2hvaXNlcyIsIkNob2ljZXMiLCJpdGVtU2VsZWN0VGV4dCIsInNlYXJjaEVuYWJsZWQiLCJidXJnZXJCdG4iLCJzaG93SGlkZGVuRm9ybSIsImNsYXNzTGlzdCIsImFkZCIsInRvZ2dsZSIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsInJlbW92ZSIsInN0eWxlTGlzdCIsInN0eWxlTElzdEl0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImhlYWRlckhpZGRlbkxpc3QiLCJzdmdBcnJvdyIsImFydGljbGUiLCJtb2RhbEJ0biIsIm1vZGFsQ2xvc2UiLCJtb2RhbFdpbmRvdyIsImdhbGxlcnlNb2RhbENvbnRlbnQiLCJ0YWJsZXRNb2RhbEJ0biIsImNsb3NlSGlkZGVuTGlzdCIsImZvckVhY2giLCJpdGVtIiwiZSIsInRhcmdldCIsInN0eWxlIiwiZGlzcGxheSIsImJvZHkiLCJvdmVyZmxvd1kiLCJpIiwiY29kZSIsImdhbGxlcnlDb250ZW50Iiwic2hvd0hpZGRlbkNhcmRzIiwiaGlkZUJ1dHRvbiIsImV2ZW50QnRuIiwiaW5pdCIsIm15TWFwIiwieW1hcHMiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwibXlQbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJpY29uTGF5b3V0IiwiaWNvbkltYWdlSHJlZiIsImljb25JbWFnZVNpemUiLCJpY29uSW1hZ2VPZmZzZXQiLCJnZW9PYmplY3RzIiwiZ2FsbGVyeUltZyIsInBhcmVudEVsZW1lbnQiLCJpbm5lckhUTUwiLCJTaW1wbGVCYXIiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJsYXN0RWxlbWVudENoaWxkIiwicHJldmVudERlZmF1bHQiLCJhcnRpc3QiLCJkYXRhc2V0IiwiY291bnRyeSIsInJlYWR5Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxjQUFnQixJQUFJQyxPQUFPLDRCQUE2QixDQUM1REMsVUFBVyxhQUNYQyxlQUFnQixFQUNoQkMsZ0JBQWlCLEVBQ2pCQyxjQUFlLEVBQ2ZDLGFBQWMsR0FFZEMsWUFBYSxDQUNYQyxJQUFLLENBQ0hMLGVBQWdCLEVBQ2hCQyxnQkFBaUIsRUFDakJDLGNBQWUsRUFDZkMsYUFBYyxJQUdoQkcsSUFBSyxDQUNITixlQUFnQixFQUNoQkMsZ0JBQWlCLEVBQ2pCQyxjQUFlLEVBQ2ZDLGFBQWMsSUFHaEJJLEtBQU0sQ0FDSlAsZUFBZ0IsRUFDaEJDLGdCQUFpQixFQUNqQkMsY0FBZSxFQUNmQyxhQUFjLEtBTWxCSyxXQUFZLENBQ1ZDLE9BQVEsdUJBQ1JDLE9BQVEsd0JBR1ZDLFdBQVksQ0FDVkMsR0FBSSxzQkFDSkMsS0FBTSxjQUlWQyxTQUFTQyxpQkFBaUIsb0JBQW9CLFdBQzVDQyxPQUFPQyxTQUFXLFdBQ2hCcEIsY0FBY3FCLGFBSWxCLE1BQU1DLGNBQWdCLElBQUlyQixPQUFPLDRCQUE2QixDQUM1REMsVUFBVyxhQUNYQyxlQUFn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QUtuQixVQUFVSyxPQUFPLDJCQUV4QnpDLFNBQVNjLGNBQWMsb0JBQW9CNEUsT0FBYXRELFVBQVVDLElBQUksK0JBbUI1RTZCLGFBRUFsRSxTQUFTYyxjQUFjLCtCQUErQmIsaUJBQWlCLFNBQVMsV0FDOUVELFNBQVNjLGNBQWMsd0JBQXdCc0IsVUFBVUUsT0FBTywrQkFDaEV0QyxTQUFTYyxjQUFjLHNCQUFzQnNCLFVBQVVFLE9BQU8sZ0NBR2hFZ0MsTUFBTXFCLE1BQU12QiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2FsbGVyeVN3aXBlciA9IG5ldyBTd2lwZXIoJy5nYWxsZXJ5LXN3aXBlci1jb250YWluZXInLCB7XG4gIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICBzbGlkZXNQZXJHcm91cDogMSxcbiAgc2xpZGVzUGVyQ29sdW1uOiAxLFxuICBzbGlkZXNQZXJWaWV3OiAxLFxuICBzcGFjZUJldHdlZW46IDEwLFxuXG4gIGJyZWFrcG9pbnRzOiB7XG4gICAgNDU1OiB7XG4gICAgICBzbGlkZXNQZXJHcm91cDogMixcbiAgICAgIHNsaWRlc1BlckNvbHVtbjogMSxcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICBzcGFjZUJldHdlZW46IDIwXG4gICAgfSxcblxuICAgIDc2MDoge1xuICAgICAgc2xpZGVzUGVyR3JvdXA6IDIsXG4gICAgICBzbGlkZXNQZXJDb2x1bW46IDIsXG4gICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgc3BhY2VCZXR3ZWVuOiAzNFxuICAgIH0sXG5cbiAgICAxMzIxOiB7XG4gICAgICBzbGlkZXNQZXJHcm91cDogMyxcbiAgICAgIHNsaWRlc1BlckNvbHVtbjogMixcbiAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICBzcGFjZUJldHdlZW46IDUwXG4gICAgfVxuICB9LFxuXG5cblxuICBuYXZpZ2F0aW9uOiB7XG4gICAgbmV4dEVsOiAnLmdhbGxlcnktYnV0dG9uLW5leHQnLFxuICAgIHByZXZFbDogJy5nYWxsZXJ5LWJ1dHRvbi1wcmV2JyxcbiAgfSxcblxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuZ2FsbGVyeS1wYWdpbmF0aW9uJyxcbiAgICB0eXBlOiAnZnJhY3Rpb24nLFxuICB9LFxufSk7XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gIHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBnYWxsZXJ5U3dpcGVyLnVwZGF0ZSgpO1xuICB9O1xufSk7XG5cbmNvbnN0IGVkaXRpb25Td2lwZXIgPSBuZXcgU3dpcGVyKCcuZWRpdGlvbi1zd2lwZXItY29udGFpbmVyJywge1xuICBkaXJlY3Rpb246ICdob3Jpem9udGFsJyxcbiAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gIHNsaWRlc1BlclZpZXc6IDEsXG4gIHNsaWRlc1BlckNvbHVtbjogMSxcbiAgc3BhY2VCZXR3ZWVuOiAxMCxcblxuICBuYXZpZ2F0aW9uOiB7XG4gICAgbmV4dEVsOiAnLmVkaXRpb24tYnV0dG9uLW5leHQnLFxuICAgIHByZXZFbDogJy5lZGl0aW9uLWJ1dHRvbi1wcmV2JyxcbiAgfSxcblxuICBwYWdpbmF0aW9uOiB7XG4gICAgZWw6ICcuZWRpdGlvbi1wYWdpbmF0aW9uJyxcbiAgICB0eXBlOiAnZnJhY3Rpb24nLFxuICB9LFxuXG4gIGJyZWFrcG9pbnRzOiB7XG4gICAgNDU1OiB7XG4gICAgICBzbGlkZXNQZXJHcm91cDogMixcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICBzbGlkZXNQZXJDb2x1bW46IDEsXG4gICAgICBzcGFjZUJldHdlZW46IDM0XG4gICAgfSxcblxuICAgIDEyMDA6IHtcbiAgICAgIHNsaWRlc1Blckdyb3VwOiAxLFxuICAgICAgc2xpZGVzUGVyQ29sdW1uOiAxLFxuICAgICAgc2xpZGVzUGVyVmlldzogMixcbiAgICAgIHNwYWNlQmV0d2VlbjogNTBcbiAgICB9LFxuXG4gICAgMTUwMDoge1xuICAgICAgc2xpZGVzUGVyR3JvdXA6IDEsXG4gICAgICBzbGlkZXNQZXJDb2x1bW46IDEsXG4gICAgICBzbGlkZXNQZXJWaWV3OiAzLFxuICAgICAgc3BhY2VCZXR3ZWVuOiA1MFxuICAgIH1cbiAgfVxufSk7XG5cbmNvbnN0IHByb2plY3RzU3dpcGVyID0gbmV3IFN3aXBlcignLnByb2plY3RzLXN3aXBlci1jb250YWluZXInLCB7XG4gIGRpcmVjdGlvbjogJ2hvcml6b250YWwnLFxuICBzbGlkZXNQZXJWaWV3OiAxLFxuICBzbGlkZXNQZXJHcm91cDogMSxcbiAgc2xpZGVzUGVyQ29sdW1uOiAxLFxuICBzcGFjZUJldHdlZW46IDEwLFxuXG4gIG5hdmlnYXRpb246IHtcbiAgICBuZXh0RWw6ICcucHJvLWJ1dHRvbi1uZXh0JyxcbiAgICBwcmV2RWw6ICcucHJvLWJ1dHRvbi1wcmV2JyxcbiAgfSxcblxuICBicmVha3BvaW50czoge1xuICAgIDU4MDoge1xuICAgICAgc2xpZGVzUGVyR3JvdXA6IDIsXG4gICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgc2xpZGVzUGVyQ29sdW1uOiAxLFxuICAgICAgc3BhY2VCZXR3ZWVuOiAzNFxuICAgIH0sXG5cbiAgICAxMTk3OiB7XG4gICAgICBzbGlkZXNQZXJHcm91cDogMyxcbiAgICAgIHNsaWRlc1BlckNvbHVtbjogMSxcbiAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICBzcGFjZUJldHdlZW46IDUwXG4gICAgfVxuICB9XG59KTtcblxuY29uc3QgZXZlbnRTd2lwZXIgPSBuZXcgU3dpcGVyKCcuZXZlbnQtc3dpcGVyLWNvbnRhaW5lcicsIHtcbiAgZGlyZWN0aW9uOiAnaG9yaXpvbnRhbCcsXG4gIHNsaWRlc1BlclZpZXc6IDEsXG4gIHNwYWNlQmV0d2VlbjogMTAsXG5cbiAgcGFnaW5hdGlvbjoge1xuICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICB0eXBlOiAnYnVsbGV0cycsXG4gICAgY2xpY2thYmxlOiB0cnVlLFxuICB9LFxufSk7XG5cbmNvbnN0IHNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cInRlbFwiXScpO1xuY29uc3QgaW0gPSBuZXcgSW5wdXRtYXNrKCcrNyAoOTk5KSA5OTktOTktOTknKTtcblxuaW0ubWFzayhzZWxlY3Rvcik7XG5cbm5ldyBKdXN0VmFsaWRhdGUoJ2Zvcm0nLCB7XG4gIHRlbDoge1xuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIGZ1bmN0aW9uOiAobmFtZSwgdmFsdWUpID0+IHtcbiAgICAgIGNvbnN0IHBob25lID0gc2VsZWN0b3IuaW5wdXRtYXNrLnVubWFza2VkdmFsdWUoKTtcbiAgICAgIHJldHVybiBOdW1iZXIocGhvbmUpICYmIHBob25lLmxlbmd0aCA9PSAxMDtcbiAgICB9XG4gIH1cbn0pO1xuXG5jb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbGVjdCcpO1xuY29uc3QgY2hvaXNlcyA9IG5ldyBDaG9pY2VzKGVsZW1lbnQsIHtcbiAgaXRlbVNlbGVjdFRleHQ6ICcnLFxuICBzZWFyY2hFbmFibGVkOiBmYWxzZVxufSk7XG5cbmNvbnN0IGJ1cmdlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItbWVudScpO1xuXG5idXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXJnZXItbWVudV9fbmF2JykuY2xhc3NMaXN0LnRvZ2dsZSgnbWVudV9fbmF2LWFjdGl2ZScpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLW1lbnVfX2ljb24nKS5jbGFzc0xpc3QudG9nZ2xlKCdpY29uLWFjdGl2ZScpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFibGV0LWxvdXBlX19zZWFyY2gnKS5jbGFzc0xpc3QudG9nZ2xlKCd0YWJsZXQtbG91cGVfX3NlYXJjaC0taGlkZGVuJyk7XG59KTtcblxuXG5mdW5jdGlvbiBzaG93SGlkZGVuRm9ybSgpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhYmxldC1sb3VwZV9fc2VhcmNoJykuY2xhc3NMaXN0LmFkZCgnc2VhcmNoLWFjdGl2ZScpO1xufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFibGV0LWxvdXBlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdzZWFyY2gtYWN0aXZlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2JpbGUtYmcnKS5jbGFzc0xpc3QuYWRkKCdtb2JpbGUtYmctLWFjdGl2ZScpO1xuICBzaG93SGlkZGVuRm9ybSgpO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFibGV0LWxvdXBlX19zZWFyY2gnKS5jbGFzc0xpc3QucmVtb3ZlKCdzZWFyY2gtYWN0aXZlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWJsZXQtbG91cGUnKS5jbGFzc0xpc3QucmVtb3ZlKCdzZWFyY2gtYWN0aXZlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2JpbGUtYmcnKS5jbGFzc0xpc3QucmVtb3ZlKCdtb2JpbGUtYmctLWFjdGl2ZScpO1xufSk7XG5cbmNvbnN0IHN0eWxlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2JvdHRvbV9fbGlzdCcpO1xuY29uc3Qgc3R5bGVMSXN0SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyX19ib3R0b21fX2xpc3RfX2l0ZW1fX2xpbmsnKTtcbmNvbnN0IGhlYWRlckhpZGRlbkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGlkZGVuX19saXN0LXdyYXBwZXInKTtcbmNvbnN0IHN2Z0Fycm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fYm90dG9tX19saXN0X19pdGVtX19zdmcnKTtcbmNvbnN0IGFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXJ0aWNsZV9fYm94X193cmFwJyk7XG5jb25zdCBtb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZXQtaW5fX2lubmVyJyk7XG5jb25zdCBtb2RhbENsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsQ2xvc2VCdG4nKTtcbmNvbnN0IG1vZGFsV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX193cmFwcGVyJyk7XG5jb25zdCBnYWxsZXJ5TW9kYWxDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnktbW9kYWwnKTtcbmNvbnN0IHRhYmxldE1vZGFsQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdldC1pbl9fYm94Jyk7XG5cbm1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gIGlmICh0YXJnZXQgPT0gbW9kYWxCdG4gfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdldC1pbicpIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nZXQtaW4gc3ZnJykpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfVxuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tYWN0aXZlJyk7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3dZID0gJ2hpZGRlbic7XG59KTtcblxudGFibGV0TW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tYWN0aXZlJyk7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3dZID0gJ2hpZGRlbic7XG59KTtcblxuZnVuY3Rpb24gY2xvc2VIaWRkZW5MaXN0KCkge1xuICBoZWFkZXJIaWRkZW5MaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbl9fbGlzdC0tYWN0aXZlJyk7XG4gIH0pO1xuICBzdmdBcnJvdy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdsaXN0X19pdGVtX19zdmctLWFjdGl2ZScpO1xuICB9KTtcbn1cblxuc3R5bGVMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gIGNsb3NlSGlkZGVuTGlzdCgpO1xuICBzdHlsZUxJc3RJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgaWYgKHRhcmdldCA9PSBpdGVtKSB7XG4gICAgICBoZWFkZXJIaWRkZW5MaXN0W2ldLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbl9fbGlzdC0tYWN0aXZlJyk7XG4gICAgICBzdmdBcnJvd1tpXS5jbGFzc0xpc3QuYWRkKCdsaXN0X19pdGVtX19zdmctLWFjdGl2ZScpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuYXJ0aWNsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICBpZiAodGFyZ2V0ICE9PSBzdHlsZUxpc3QpIHtcbiAgICBjbG9zZUhpZGRlbkxpc3QoKTtcbiAgfVxufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX2JvdHRvbV9fbGlzdF9faXRlbScpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgZW50ZXIgPSBldmVudC5jb2RlO1xuICAgIGlmIChlbnRlciA9PSAnRW50ZXInKSB7XG4gICAgICBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5oaWRkZW5fX2xpc3Qtd3JhcHBlcicpLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbl9fbGlzdC0tYWN0aXZlJyk7XG4gICAgICBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2JvdHRvbV9fbGlzdF9faXRlbV9fc3ZnJykuY2xhc3NMaXN0LnRvZ2dsZSgnbGlzdF9faXRlbV9fc3ZnLS1hY3RpdmUnKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmNvbnN0IGdhbGxlcnlDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnktc3dpcGVyLWNvbnRhaW5lcicpO1xuXG5nYWxsZXJ5Q29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0O1xuICBjb25zdCBnYWxsZXJ5SW1nID0gdGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCdwaWN0dXJlJykuaW5uZXJIVE1MO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeS1tb2RhbF9faW1nIHBpY3R1cmUnKS5pbm5lckhUTUwgPSBnYWxsZXJ5SW1nO1xuICBpZiAodGFyZ2V0ID09PSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeS1pbWdfX2hvdmVyJykgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnktaW1nX19ob3Zlci1sb3VwZScpKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX193cmFwcGVyJykuY2xhc3NMaXN0LmFkZCgnbW9kYWwtLWFjdGl2ZScpO1xuICAgIGdhbGxlcnlNb2RhbENvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93WSA9ICdoaWRkZW4nO1xuICB9XG59KTtcblxubW9kYWxDbG9zZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgIGl0ZW0ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtLWFjdGl2ZScpO1xuICAgIG1vZGFsV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1hY3RpdmUnKTtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGdhbGxlcnlNb2RhbENvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJztcblxuICB9KTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGlkZGVuX19saXN0LXdyYXBwZXInKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIG5ldyBTaW1wbGVCYXIoaXRlbSk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2ctbWFpbl9fbGlzdF9faXRlbV9fdGl0bGUnKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpdGVtLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QudG9nZ2xlKCdpbm5lci1saXN0X19hY3RpdmUnKTtcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0Lmxhc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnRvZ2dsZSgnYXJyb3ctZG93bi0tYWN0aXZlJyk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlubmVyLWxpc3RfX2l0ZW0nKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhcnRpc3QgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYXJ0aXN0O1xuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmFydGlzdC1jb250YWluZXInKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FydGlzdC1jb250YWluZXItLWFjdGl2ZScpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhcmdldD1cIiR7YXJ0aXN0fVwiXWApLmNsYXNzTGlzdC5hZGQoJ2FydGlzdC1jb250YWluZXItLWFjdGl2ZScpO1xuICB9KTtcbn0pO1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaW5uZXItbGlzdF9fYXJ0aXN0cycpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nLWxhbmctbGlzdF9faXRlbScpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IGNvdW50cnkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY291bnRyeTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nLW1haW4nKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2NhdGFsb2ctbWFpbi0tYWN0aXZlJyk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtY29udGFpbmVyPVwiJHtjb3VudHJ5fVwiXWApLmNsYXNzTGlzdC5hZGQoJ2NhdGFsb2ctbWFpbi0tYWN0aXZlJyk7XG4gIH0pO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXRhbG9nLWxhbmctbGlzdF9faXRlbScpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgY291bnRyeSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb3VudHJ5O1xuICAgIGNvbnN0IGVudGVyID0gZXZlbnQuY29kZTtcbiAgICBpZiAoZW50ZXIgPT0gJ0VudGVyJykge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhdGFsb2ctbWFpbicpLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdjYXRhbG9nLW1haW4tLWFjdGl2ZScpO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1jb250YWluZXI9XCIke2NvdW50cnl9XCJdYCkuY2xhc3NMaXN0LmFkZCgnY2F0YWxvZy1tYWluLS1hY3RpdmUnKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmZ1bmN0aW9uIHNob3dIaWRkZW5DYXJkcygpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmV2ZW50LWxpc3RfX2NhcmQnKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4tY2FyZCcpO1xuICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuLXRhYmxldC1jYXJkJyk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBoaWRlQnV0dG9uKCkge1xuICBjb25zdCBldmVudEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ldmVudF9fYnRuJyk7XG4gIGV2ZW50QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGV2ZW50QnRuLnN0eWxlID0gJ2Rpc3BsYXk6IG5vbmUnO1xuICAgIHNob3dIaWRkZW5DYXJkcygpO1xuICB9KTtcbn1cbmhpZGVCdXR0b24oKTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhdGVnb3JpZXNfX21vYmlsZS13cmFwcGVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2JpbGUtZWRpdGlvbi1mb3JtJykuY2xhc3NMaXN0LnRvZ2dsZSgnbW9iaWxlLWVkaXRpb24tZm9ybS0tYWN0aXZlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXRlZ29yaWVzX19hcnJvdycpLmNsYXNzTGlzdC50b2dnbGUoJ2NhdGVnb3JpZXNfX2Fycm93LS1hY3RpdmUnKTtcbn0pO1xuXG55bWFwcy5yZWFkeShpbml0KTtcbmZ1bmN0aW9uIGluaXQoKSB7XG4gIC8vINCh0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLRiy5cbiAgY29uc3QgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcbiAgICBjZW50ZXI6IFs1NS43NTg0NjMwNjg5ODM2OCwgMzcuNjAxMDc5NDk5OTk5OTA1XSxcbiAgICB6b29tOiAxMlxuICB9KTtcblxuICBjb25zdCBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU1Ljc1ODQ2MzA2ODk4MzY4LCAzNy42MDEwNzk0OTk5OTk5MDVdLCB7fSwge1xuICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcbiAgICBpY29uSW1hZ2VIcmVmOiAnaW1nL3N2Zy9tYXBtYXJrLnN2ZycsXG4gICAgaWNvbkltYWdlU2l6ZTogWzIwLCAyMF0sXG4gICAgaWNvbkltYWdlT2Zmc2V0OiBbLTMsIC00Ml1cbiAgfSk7XG5cbiAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQbGFjZW1hcmspO1xufVxuIl19
